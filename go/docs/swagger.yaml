basePath: /
definitions:
  enums.CourseStatus:
    enum:
    - active
    - archived
    type: string
    x-enum-varnames:
    - CourseStatusActive
    - CourseStatusArchived
  enums.EnrollmentRole:
    enum:
    - student
    - ta
    - teacher
    type: string
    x-enum-comments:
      EnrollmentRoleTeacher: Reserved for future use
    x-enum-descriptions:
    - ""
    - ""
    - Reserved for future use
    x-enum-varnames:
    - EnrollmentRoleStudent
    - EnrollmentRoleTA
    - EnrollmentRoleTeacher
  enums.MaterialType:
    enum:
    - document
    - video
    - code_exercise
    - pdf_exercise
    type: string
    x-enum-comments:
      MaterialTypeCodeExercise: แบบฝึกหัดโค้ด (Code exercises)
      MaterialTypeDocument: ไฟล์เอกสาร (PDF, DOC, etc.)
      MaterialTypePDFExercise: แบบฝึกหัด PDF (PDF exercises)
      MaterialTypeVideo: วิดีโอ (YouTube, Vimeo, etc.)
    x-enum-descriptions:
    - ไฟล์เอกสาร (PDF, DOC, etc.)
    - วิดีโอ (YouTube, Vimeo, etc.)
    - แบบฝึกหัดโค้ด (Code exercises)
    - แบบฝึกหัด PDF (PDF exercises)
    x-enum-varnames:
    - MaterialTypeDocument
    - MaterialTypeVideo
    - MaterialTypeCodeExercise
    - MaterialTypePDFExercise
  enums.SubmissionStatus:
    enum:
    - pending
    - running
    - error
    - completed
    type: string
    x-enum-varnames:
    - SubmissionPending
    - SubmissionRunning
    - SubmissionError
    - SubmissionCompleted
  models.Announcement:
    properties:
      announcement_id:
        type: string
      content:
        type: string
      course:
        allOf:
        - $ref: '#/definitions/models.Course'
        description: Relations
      course_id:
        type: string
      created_at:
        type: string
      created_by:
        type: string
      creator:
        $ref: '#/definitions/models.User'
      title:
        type: string
      updated_at:
        type: string
    type: object
  models.Course:
    properties:
      course_id:
        type: string
      created_at:
        type: string
      created_by:
        type: string
      creator:
        allOf:
        - $ref: '#/definitions/models.User'
        description: Creator info - populated manually, not a GORM relation
      description:
        type: string
      enroll_key:
        type: string
      enrollment_count:
        description: Computed fields
        type: integer
      enrollments:
        description: Relations - Fix the foreign key references
        items:
          $ref: '#/definitions/models.Enrollment'
        type: array
      image_url:
        type: string
      material_count:
        type: integer
      name:
        type: string
      status:
        $ref: '#/definitions/enums.CourseStatus'
      updated_at:
        type: string
    type: object
  models.CourseMaterial:
    properties:
      constraints:
        description: Problem constraints and limitations
        type: string
      course:
        allOf:
        - $ref: '#/definitions/models.Course'
        description: Relations
      course_id:
        type: string
      created_at:
        type: string
      created_by:
        type: string
      creator:
        $ref: '#/definitions/models.User'
      deadline:
        description: กำหนดส่ง
        type: string
      description:
        type: string
      example_inputs:
        description: Array of example input data
        items:
          type: integer
        type: array
      example_outputs:
        description: Array of example output data
        items:
          type: integer
        type: array
      file_name:
        description: ชื่อไฟล์เดิม
        type: string
      file_size:
        description: ขนาดไฟล์ (bytes)
        type: integer
      file_url:
        description: สำหรับเอกสาร
        type: string
      hints:
        description: Hints for solving the problem
        type: string
      is_public:
        description: เปิดให้ดูได้หรือไม่
        type: boolean
      material_id:
        type: string
      mime_type:
        description: ประเภทไฟล์
        type: string
      problem_images:
        description: Array of image URLs
        items:
          type: integer
        type: array
      problem_statement:
        description: Problem statement fields (for code exercises)
        type: string
      submission_type:
        description: '''file'' หรือ ''code'''
        type: string
      test_cases:
        items:
          $ref: '#/definitions/models.TestCase'
        type: array
      title:
        type: string
      total_points:
        description: Exercise-specific fields
        type: integer
      type:
        $ref: '#/definitions/enums.MaterialType'
      updated_at:
        type: string
      video_url:
        description: สำหรับลิงก์วิดีโอ
        type: string
      week:
        type: integer
    type: object
  models.Enrollment:
    properties:
      course:
        allOf:
        - $ref: '#/definitions/models.Course'
        description: Relations - Remove the problematic constraints
      course_id:
        type: string
      enrolled_at:
        type: string
      enrollment_id:
        type: string
      role:
        $ref: '#/definitions/enums.EnrollmentRole'
      updated_at:
        type: string
      user:
        $ref: '#/definitions/models.User'
      user_id:
        type: string
      user_info:
        allOf:
        - $ref: '#/definitions/models.User'
        description: User info for response - populated manually
    type: object
  models.Submission:
    properties:
      code:
        description: สำหรับ code exercises
        type: string
      error_message:
        type: string
      failed_count:
        type: integer
      file_name:
        description: ชื่อไฟล์ที่ส่ง
        type: string
      file_size:
        description: ขนาดไฟล์
        type: integer
      file_url:
        description: สำหรับ PDF exercises
        type: string
      material_id:
        description: สำหรับ course materials
        type: string
      mime_type:
        description: ประเภทไฟล์
        type: string
      passed_count:
        type: integer
      results:
        items:
          $ref: '#/definitions/models.SubmissionResult'
        type: array
      status:
        $ref: '#/definitions/enums.SubmissionStatus'
      submission_id:
        type: string
      submitted_at:
        type: string
      total_score:
        type: integer
      user_id:
        type: string
    type: object
  models.SubmissionResult:
    properties:
      actual_output:
        items:
          type: integer
        type: array
      createdAt:
        type: string
      error_message:
        type: string
      result_id:
        type: string
      status:
        type: string
      submission_id:
        type: string
      test_case_id:
        type: string
    type: object
  models.TestCase:
    properties:
      course_material:
        allOf:
        - $ref: '#/definitions/models.CourseMaterial'
        description: Relations
      created_at:
        type: string
      display_name:
        description: Human-readable name for the test case
        type: string
      expected_output:
        items:
          type: integer
        type: array
      input_data:
        items:
          type: integer
        type: array
      is_public:
        description: Whether this test case is visible to students
        type: boolean
      material_id:
        description: For course material test cases
        type: string
      test_case_id:
        type: string
      updated_at:
        type: string
    type: object
  models.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      firstname:
        type: string
      is_teacher:
        type: boolean
      lastname:
        type: string
      profile_img:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  response.StandardResponse:
    properties:
      data: {}
      error: {}
      message:
        type: string
      success:
        type: boolean
    type: object
  response.UserResponse:
    properties:
      email:
        type: string
      firstname:
        type: string
      is_teacher:
        type: boolean
      lastname:
        type: string
      profile_img:
        type: string
      user_id:
        type: string
    type: object
  types.ApprovePDFSubmissionRequest:
    properties:
      comment:
        minLength: 1
        type: string
      score:
        maximum: 100
        minimum: 0
        type: integer
    required:
    - comment
    - score
    type: object
  types.CourseScoreBatchUpdateRequest:
    properties:
      course_id:
        type: string
      user_ids:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - course_id
    - user_ids
    type: object
  types.CreateAnnouncementRequest:
    properties:
      content:
        minLength: 1
        type: string
      course_id:
        type: string
      title:
        maxLength: 255
        minLength: 1
        type: string
    required:
    - content
    - course_id
    - title
    type: object
  types.PlaygroundRunRequest:
    properties:
      code:
        type: string
      dataType:
        type: string
    required:
    - code
    - dataType
    type: object
  types.RejectPDFSubmissionRequest:
    properties:
      comment:
        minLength: 1
        type: string
    required:
    - comment
    type: object
  types.TestTokenRequest:
    properties:
      duration:
        description: Optional custom duration like "1h", "30m", "24h"
        type: string
      email:
        type: string
      is_teacher:
        type: boolean
      name:
        type: string
    type: object
  types.UpdateAnnouncementRequest:
    properties:
      content:
        minLength: 1
        type: string
      title:
        maxLength: 255
        minLength: 1
        type: string
    type: object
  types.UpdateCourseMaterialRequest:
    properties:
      deadline:
        type: string
      description:
        minLength: 1
        type: string
      exercise_id:
        description: Exercise-specific fields
        type: string
      file_name:
        type: string
      file_size:
        type: integer
      file_url:
        type: string
      is_public:
        type: boolean
      mime_type:
        type: string
      submission_type:
        enum:
        - file
        - code
        type: string
      title:
        maxLength: 255
        minLength: 1
        type: string
      total_points:
        type: integer
      type:
        enum:
        - document
        - code_exercise
        - pdf_exercise
        type: string
      video_url:
        type: string
      week:
        minimum: 0
        type: integer
    type: object
host: localhost:8080
info:
  contact:
    email: 65070209@kmitl.ac.th
    name: API Support
    url: https://github.com/Project-DSView/backend
  description: This is the backend API for DSView application In Services GO
  termsOfService: http://swagger.io/terms/
  title: DSView API Go Service
  version: 1.0.0-alpha
paths:
  /api/announcements:
    get:
      description: Get announcements for a specific course with optional filtering.
        Non-teachers can only see announcements from courses they are enrolled in.
      parameters:
      - description: Course ID
        in: query
        name: course_id
        required: true
        type: string
      - description: Filter by week
        in: query
        name: week
        type: integer
      - default: 20
        description: Limit results
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset results
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.Announcement'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get announcements
      tags:
      - announcements
    post:
      consumes:
      - application/json
      description: Create a new announcement for a course (teachers only)
      parameters:
      - description: Announcement data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.CreateAnnouncementRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Announcement'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create announcement
      tags:
      - announcements
  /api/announcements/{id}:
    delete:
      description: Delete an announcement (creator only)
      parameters:
      - description: Announcement ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Delete announcement
      tags:
      - announcements
    get:
      description: Get a specific announcement by ID. Non-teachers can only see announcements
        from courses they are enrolled in.
      parameters:
      - description: Announcement ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Announcement'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get announcement
      tags:
      - announcements
    put:
      consumes:
      - application/json
      description: Update an existing announcement (creator only)
      parameters:
      - description: Announcement ID
        in: path
        name: id
        required: true
        type: string
      - description: Update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.UpdateAnnouncementRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Announcement'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Update announcement
      tags:
      - announcements
  /api/announcements/recent:
    get:
      description: Get recent announcements from all enrolled courses
      parameters:
      - default: 10
        description: Limit results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.Announcement'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get recent announcements
      tags:
      - announcements
  /api/announcements/stats:
    get:
      description: Get statistics for announcements in a course. Non-teachers can
        only see stats from courses they are enrolled in.
      parameters:
      - description: Course ID
        in: query
        name: course_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get announcement stats
      tags:
      - announcements
  /api/auth/google:
    get:
      description: Generate Google OAuth2 login URL and return to client
      produces:
      - application/json
      responses:
        "200":
          description: Returns auth URL and state
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Login with Google OAuth2
      tags:
      - auth
  /api/auth/google/callback:
    get:
      description: Handle callback from Google OAuth2, validate state, exchange code
        for token, and authenticate user
      parameters:
      - description: OAuth2 state parameter for CSRF protection
        in: query
        name: state
        required: true
        type: string
      - description: Authorization code from Google
        in: query
        name: code
        type: string
      - description: OAuth error from Google
        in: query
        name: error
        type: string
      responses:
        "302":
          description: Redirect to frontend with token or error page
          schema:
            type: string
        "400":
          description: Bad request - missing or invalid parameters
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - authentication failed
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Google OAuth2 callback handler
      tags:
      - auth
  /api/auth/logout:
    post:
      description: Remove refresh token from database and clear OAuth codes (client
        should discard JWT token)
      produces:
      - application/json
      responses:
        "200":
          description: Logout successful
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Logout user
      tags:
      - auth
  /api/auth/refresh:
    post:
      description: Generate a new JWT access token using stored Google refresh token
      produces:
      - application/json
      responses:
        "200":
          description: New token generated successfully
          schema:
            properties:
              data:
                properties:
                  token:
                    type: string
                  user:
                    type: object
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized - no valid session or refresh token expired
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Refresh JWT access token
      tags:
      - auth
  /api/course-materials:
    get:
      description: Get course materials for a specific course with optional filtering
      parameters:
      - description: Course ID
        in: query
        name: course_id
        required: true
        type: string
      - description: Filter by week
        in: query
        name: week
        type: integer
      - description: Filter by material type
        in: query
        name: type
        type: string
      - default: 20
        description: Limit results
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset results
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.CourseMaterial'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get course materials
      tags:
      - course-materials
    post:
      consumes:
      - multipart/form-data
      description: Create a new course material for a course (teachers only)
      parameters:
      - description: Course ID
        in: formData
        name: CourseID
        required: true
        type: string
      - description: Material title
        in: formData
        name: Title
        required: true
        type: string
      - description: Material description
        in: formData
        name: Description
        type: string
      - description: Material type
        enum:
        - pdf_exercise
        - code_exercise
        - document
        - video
        in: formData
        name: Type
        required: true
        type: string
      - description: Week number
        in: formData
        name: Week
        type: integer
      - description: Is public
        in: formData
        name: IsPublic
        type: boolean
      - description: Total points
        in: formData
        name: TotalPoints
        type: integer
      - description: Deadline (ISO 8601)
        in: formData
        name: Deadline
        type: string
      - description: File to upload
        in: formData
        name: File
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.CourseMaterial'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Create course material
      tags:
      - course-materials
  /api/course-materials/{id}:
    delete:
      description: Delete a course material (creator only)
      parameters:
      - description: Material ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete course material
      tags:
      - course-materials
    get:
      description: Get a specific course material by ID
      parameters:
      - description: Material ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.CourseMaterial'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get course material
      tags:
      - course-materials
    put:
      consumes:
      - application/json
      description: Update an existing course material (creator only)
      parameters:
      - description: Material ID
        in: path
        name: id
        required: true
        type: string
      - description: Update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.UpdateCourseMaterialRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.CourseMaterial'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update course material
      tags:
      - course-materials
  /api/course-materials/{id}/images:
    post:
      consumes:
      - multipart/form-data
      description: Upload an image for exercise problem statement
      parameters:
      - description: Material ID
        in: path
        name: id
        required: true
        type: string
      - description: Image file
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  properties:
                    image_url:
                      type: string
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Upload problem image
      tags:
      - course-materials
  /api/course-materials/{id}/test-cases:
    get:
      description: Get test cases for a specific material
      parameters:
      - description: Material ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.TestCase'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get test cases
      tags:
      - course-materials
    post:
      consumes:
      - application/json
      description: Add a test case to a material (teachers only)
      parameters:
      - description: Material ID
        in: path
        name: id
        required: true
        type: string
      - description: Test case data
        in: body
        name: request
        required: true
        schema:
          properties:
            expected_output:
              type: object
            input_data:
              type: object
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.TestCase'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Add test case
      tags:
      - course-materials
  /api/course-materials/test-cases/{test_case_id}:
    delete:
      description: Delete a test case (teachers only)
      parameters:
      - description: Test Case ID
        in: path
        name: test_case_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete test case
      tags:
      - course-materials
    put:
      consumes:
      - application/json
      description: Update a test case (teachers only)
      parameters:
      - description: Test Case ID
        in: path
        name: test_case_id
        required: true
        type: string
      - description: Test case data
        in: body
        name: request
        required: true
        schema:
          properties:
            expected_output:
              type: object
            input_data:
              type: object
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.TestCase'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update test case
      tags:
      - course-materials
  /api/course-materials/upload:
    post:
      consumes:
      - multipart/form-data
      description: Upload a file for course material (teachers only)
      parameters:
      - description: Course ID
        in: formData
        name: course_id
        required: true
        type: string
      - description: Material type
        enum:
        - document
        - exercise
        in: formData
        name: material_type
        required: true
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  additionalProperties:
                    type: string
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Upload course material file
      tags:
      - course-materials
  /api/course-scores/batch-update:
    post:
      consumes:
      - application/json
      description: Update course scores for multiple students efficiently
      parameters:
      - description: Batch update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.CourseScoreBatchUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Batch update course scores
      tags:
      - course-scores
  /api/course-scores/course:
    get:
      description: Get total score for a student in a specific course
      parameters:
      - description: Course ID
        in: query
        name: course_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get student course score
      tags:
      - course-scores
  /api/course-scores/course-stats:
    get:
      description: Get statistics for scores in a specific course
      parameters:
      - description: Course ID
        in: query
        name: course_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get course score statistics
      tags:
      - course-scores
  /api/course-scores/leaderboard:
    get:
      description: Get the leaderboard for a specific course
      parameters:
      - description: Course ID
        in: query
        name: course_id
        required: true
        type: string
      - default: 10
        description: Limit results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    type: object
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get course leaderboard
      tags:
      - course-scores
  /api/course-scores/stats:
    get:
      description: Get statistics for a student's scores across all courses
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  type: object
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get student score statistics
      tags:
      - course-scores
  /api/course-scores/update:
    post:
      description: Update the total score for a student in a specific course
      parameters:
      - description: Course ID
        in: query
        name: course_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Update course score
      tags:
      - course-scores
  /api/courses:
    get:
      description: Get courses with pagination and filtering. Requires both API key
        and JWT authentication.
      parameters:
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Items per page (default: 20)'
        in: query
        name: limit
        type: integer
      - description: Filter by status
        enum:
        - active
        - archived
        in: query
        name: status
        type: string
      - description: Search in name and description
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of courses
          schema:
            properties:
              data:
                properties:
                  courses:
                    items:
                      type: object
                    type: array
                  pagination:
                    type: object
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized - Both API key and JWT token required
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: List courses
      tags:
      - courses
    post:
      consumes:
      - application/json
      description: Create a new course (Teacher and Admin only). Requires both API
        key and JWT authentication.
      parameters:
      - description: Course data
        in: body
        name: course
        required: true
        schema:
          properties:
            description:
              type: string
            enroll_key:
              type: string
            name:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Course created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - Both API key and JWT token required
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Create a new course
      tags:
      - courses
  /api/courses/{courseId}/enrollments/{userId}/role:
    put:
      consumes:
      - application/json
      description: Update a user's enrollment role in a course (Teachers only)
      parameters:
      - description: Course ID
        in: path
        name: courseId
        required: true
        type: string
      - description: User ID
        in: path
        name: userId
        required: true
        type: string
      - description: New enrollment role
        in: body
        name: enrollment
        required: true
        schema:
          properties:
            role:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Role updated successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Enrollment not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update enrollment role
      tags:
      - enrollments
  /api/courses/{id}:
    delete:
      description: Delete a course (Teacher/Admin only, teachers can only delete their
        own). Requires both API key and JWT authentication.
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Course deleted successfully
          schema:
            properties:
              data: {}
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - Both API key and JWT token required
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Course not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Delete course
      tags:
      - courses
    get:
      description: Get detailed course information. Requires both API key and JWT
        authentication.
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Course details
          schema:
            properties:
              data:
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized - Both API key and JWT token required
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Course not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get course by ID
      tags:
      - courses
    put:
      consumes:
      - application/json
      description: Update course information (Teacher/Admin only, teachers can only
        update their own). Requires both API key and JWT authentication.
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      - description: Course update data
        in: body
        name: course
        required: true
        schema:
          properties:
            description:
              type: string
            name:
              type: string
            status:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated course
          schema:
            properties:
              data:
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized - Both API key and JWT token required
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Course not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Update course
      tags:
      - courses
  /api/courses/{id}/enroll:
    delete:
      description: Leave a course
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Unenrolled successfully
          schema:
            properties:
              data: {}
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Enrollment not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Unenroll from course
      tags:
      - enrollments
    post:
      consumes:
      - application/json
      description: Enroll in a course using enrollment key
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      - description: Enrollment data with enrollment key
        in: body
        name: enrollment
        required: true
        schema:
          properties:
            enroll_key:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Enrolled successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Course not found
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Already enrolled
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Enroll in course
      tags:
      - enrollments
  /api/courses/{id}/enrollments:
    get:
      description: Get list of users enrolled in a course
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of enrollments
          schema:
            properties:
              data:
                properties:
                  enrollments:
                    items:
                      type: object
                    type: array
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Course not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get course enrollments
      tags:
      - enrollments
  /api/courses/{id}/exercises:
    get:
      description: Get exercises in a specific course with role-based filtering
      parameters:
      - description: Course ID
        example: '"c0653a00-1382-4170-ac3a-c0924fdf5ec2"'
        in: path
        name: id
        required: true
        type: string
      - default: 1
        description: Page number
        example: 1
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: Items per page
        example: 20
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      - description: Filter by status (Teachers/Admins only)
        enum:
        - draft
        - published
        - archived
        example: '"published"'
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Course exercises
          schema:
            properties:
              data:
                properties:
                  course_info:
                    type: object
                  exercises:
                    items:
                      type: object
                    type: array
                  pagination:
                    type: object
                  user_permissions:
                    type: object
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "403":
          description: Forbidden - not enrolled or insufficient permissions
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "404":
          description: Course not found
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Get exercises in course
      tags:
      - courses
  /api/courses/{id}/image:
    delete:
      description: Delete the image of a course (Teacher/Admin only)
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Image deleted successfully
          schema:
            properties:
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Course not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete course image
      tags:
      - courses
    post:
      consumes:
      - multipart/form-data
      description: Upload an image for a course (Teacher/Admin only)
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      - description: Course image (JPEG/PNG/WebP)
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: Image uploaded successfully
          schema:
            properties:
              data:
                properties:
                  image_url:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Course not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Upload course image
      tags:
      - courses
  /api/courses/{id}/my-enrollment:
    get:
      description: Get current user's enrollment status in a course
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Enrollment status
          schema:
            properties:
              data:
                properties:
                  enrollment:
                    type: object
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not enrolled
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - ApiKeyAuth: []
      summary: Get my enrollment status
      tags:
      - enrollments
  /api/courses/{id}/progress:
    get:
      description: ดูความก้าวหน้าของนักเรียนในรายวิชา
      parameters:
      - description: Course ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  courseProgress:
                    items:
                      properties:
                        averageScore:
                          type: number
                        completedExercises:
                          type: integer
                        lastActivity:
                          type: string
                        studentName:
                          type: string
                        totalExercises:
                          type: integer
                        userId:
                          type: string
                      type: object
                    type: array
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "403":
          description: Forbidden
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Get course progress (Teachers/TAs only)
      tags:
      - progress
  /api/exercises/{exercise_id}/draft:
    delete:
      description: Delete saved code draft for an exercise
      parameters:
      - description: Exercise ID
        in: path
        name: exercise_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Draft deleted successfully
          schema:
            properties:
              message:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Delete code draft
      tags:
      - drafts
    get:
      description: Retrieve saved code draft for an exercise
      parameters:
      - description: Exercise ID
        in: path
        name: exercise_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Draft retrieved successfully
          schema:
            properties:
              data:
                properties:
                  code:
                    type: string
                  draft_id:
                    type: string
                  file_name:
                    type: string
                  file_size:
                    type: integer
                  updated_at:
                    type: string
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "404":
          description: Draft not found
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Get code draft
      tags:
      - drafts
    post:
      consumes:
      - application/json
      description: Save code as draft without submitting
      parameters:
      - description: Exercise ID
        in: path
        name: exercise_id
        required: true
        type: string
      - description: Draft data
        in: body
        name: draft
        required: true
        schema:
          properties:
            code:
              type: string
            file_name:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Draft saved successfully
          schema:
            properties:
              data:
                properties:
                  draft_id:
                    type: string
                  saved_at:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Save code draft
      tags:
      - drafts
  /api/exercises/{exercise_id}/test-cases:
    get:
      description: Get all test cases for a specific exercise
      parameters:
      - description: Exercise ID
        in: path
        name: exercise_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of test cases
          schema:
            properties:
              data:
                items:
                  type: object
                type: array
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get test cases by exercise ID
      tags:
      - test-cases
    post:
      consumes:
      - application/json
      description: Create a new test case for an exercise
      parameters:
      - description: Exercise ID
        in: path
        name: exercise_id
        required: true
        type: string
      - description: Test case data
        in: body
        name: testcase
        required: true
        schema:
          properties:
            expected_output:
              type: object
            input_data:
              type: object
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Test case created successfully
          schema:
            properties:
              data:
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Create a new test case
      tags:
      - test-cases
  /api/exercises/{exercise_id}/upload:
    post:
      consumes:
      - multipart/form-data
      description: Upload a Python (.py) file for an exercise
      parameters:
      - description: Exercise ID
        in: path
        name: exercise_id
        required: true
        type: string
      - description: Python file (.py)
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: File uploaded successfully
          schema:
            properties:
              data:
                properties:
                  code_preview:
                    type: string
                  draft_id:
                    type: string
                  file_name:
                    type: string
                  file_size:
                    type: integer
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request - invalid file
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "413":
          description: File too large
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Upload Python file
      tags:
      - drafts
  /api/exercises/{id}/request-review:
    post:
      consumes:
      - application/json
      description: Student requests teacher review for completed exercise
      parameters:
      - description: Exercise ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  verification_requested:
                    type: boolean
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "403":
          description: Not eligible for review
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Request progress review
      tags:
      - progress
  /api/exercises/{id}/submissions:
    get:
      description: ดูการส่งงานของแบบฝึกหัด (Teachers และ TAs ที่ enroll ในคอร์สเท่านั้น)
      parameters:
      - description: Exercise ID
        in: path
        name: id
        required: true
        type: string
      - description: Filter by user ID
        in: query
        name: userId
        type: string
      - description: Filter by status
        in: query
        name: status
        type: string
      - default: 1
        description: Page number
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: Items per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  pagination:
                    properties:
                      limit:
                        type: integer
                      page:
                        type: integer
                      total:
                        type: integer
                      total_pages:
                        type: integer
                    type: object
                  submissions:
                    items:
                      properties:
                        code:
                          type: string
                        failedCount:
                          type: integer
                        passedCount:
                          type: integer
                        status:
                          type: string
                        studentName:
                          type: string
                        submissionId:
                          type: string
                        submittedAt:
                          type: string
                        totalScore:
                          type: integer
                        userId:
                          type: string
                      type: object
                    type: array
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "403":
          description: Forbidden
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: List exercise submissions
      tags:
      - submissions
  /api/exercises/{id}/submit:
    post:
      consumes:
      - application/json
      description: ส่งแบบฝึกหัด Python และประเมินผลด้วย Docker executor เทียบกับ test
        cases
      parameters:
      - description: Exercise ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            properties:
              data:
                properties:
                  code:
                    type: string
                  exerciseId:
                    type: string
                  failedCount:
                    type: integer
                  passedCount:
                    type: integer
                  results:
                    items:
                      properties:
                        actualOutput:
                          type: object
                        errorMessage:
                          type: string
                        resultId:
                          type: string
                        status:
                          type: string
                        testCaseId:
                          type: string
                      type: object
                    type: array
                  status:
                    type: string
                  submissionId:
                    type: string
                  submittedAt:
                    type: string
                  totalScore:
                    type: integer
                  userId:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad Request
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal Server Error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Submit exercise
      tags:
      - submissions
  /api/exercises/can-submit:
    get:
      description: Check if a user can submit an exercise (not past deadline)
      parameters:
      - description: Exercise ID
        in: query
        name: exercise_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Check if can submit exercise
      tags:
      - deadline-checker
  /api/exercises/deadline-stats:
    get:
      description: Get statistics about deadlines in a course
      parameters:
      - description: Filter by course ID
        in: query
        name: course_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get deadline statistics
      tags:
      - deadline-checker
  /api/exercises/upcoming-deadlines:
    get:
      description: Get exercises with deadlines approaching within specified hours
      parameters:
      - description: Filter by course ID
        in: query
        name: course_id
        type: string
      - default: 24
        description: Hours ahead to check
        in: query
        name: hours
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.CourseMaterial'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get upcoming deadlines
      tags:
      - deadline-checker
  /api/materials/{material_id}/submissions:
    get:
      description: Get PDF submissions for a material (Teachers/TAs only)
      parameters:
      - description: Material ID
        in: path
        name: material_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.Submission'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get PDF submissions
      tags:
      - pdf-exercises
  /api/materials/{material_id}/submit:
    post:
      consumes:
      - application/json
      description: Submit code for a material-based exercise (new unified system)
      parameters:
      - description: Material ID
        in: path
        name: material_id
        required: true
        type: string
      - description: Code submission
        in: body
        name: request
        required: true
        schema:
          properties:
            code:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            properties:
              data:
                properties:
                  failedCount:
                    type: integer
                  passedCount:
                    type: integer
                  results:
                    items:
                      properties:
                        actualOutput:
                          type: object
                        errorMessage:
                          type: string
                        resultId:
                          type: string
                        status:
                          type: string
                        testCaseId:
                          type: string
                      type: object
                    type: array
                  submissionId:
                    type: string
                  totalScore:
                    type: integer
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad Request
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal Server Error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Submit material exercise
      tags:
      - submissions
  /api/materials/available:
    get:
      description: Get materials that are available for submission (not past deadline)
      parameters:
      - description: Filter by course ID
        in: query
        name: course_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.CourseMaterial'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get available materials
      tags:
      - deadline-checker
  /api/materials/by-deadline-status:
    get:
      description: Get materials grouped by available and expired status
      parameters:
      - description: Filter by course ID
        in: query
        name: course_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  additionalProperties:
                    items:
                      $ref: '#/definitions/models.CourseMaterial'
                    type: array
                  type: object
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get materials by deadline status
      tags:
      - deadline-checker
  /api/materials/check-deadline:
    get:
      description: Check if a material is past its submission deadline
      parameters:
      - description: Material ID
        in: query
        name: material_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Check material deadline
      tags:
      - deadline-checker
  /api/materials/expired:
    get:
      description: Get materials that are past their submission deadline
      parameters:
      - description: Filter by course ID
        in: query
        name: course_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.CourseMaterial'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get expired materials
      tags:
      - deadline-checker
  /api/my-drafts:
    get:
      description: Get all code drafts created by current user
      produces:
      - application/json
      responses:
        "200":
          description: User drafts retrieved successfully
          schema:
            properties:
              data:
                items:
                  properties:
                    draft_id:
                      type: string
                    exercise_id:
                      type: string
                    exercise_title:
                      type: string
                    file_name:
                      type: string
                    file_size:
                      type: integer
                    updated_at:
                      type: string
                  type: object
                type: array
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Get all user drafts
      tags:
      - drafts
  /api/playground/health:
    get:
      description: Check if FastAPI playground service is available
      produces:
      - application/json
      responses:
        "200":
          description: Service is healthy
          schema:
            properties:
              data:
                properties:
                  fastapi_status:
                    type: string
                  response_time:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "502":
          description: Service unavailable
          schema:
            properties:
              error:
                type: string
              message:
                type: string
              success:
                type: boolean
            type: object
      security: []
      summary: Check FastAPI playground service health
      tags:
      - playground
  /api/playground/run:
    post:
      consumes:
      - application/json
      description: Forward code execution request to FastAPI playground service and
        return the response
      parameters:
      - description: Code execution request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.PlaygroundRunRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Code execution successful
          schema:
            properties:
              code:
                type: string
              createdAt:
                type: string
              dataType:
                type: string
              errorMessage:
                type: string
              executedAt:
                type: string
              executionId:
                type: string
              status:
                type: string
              steps:
                type: array
              totalSteps:
                type: integer
            type: object
        "400":
          description: Bad request
          schema:
            properties:
              error:
                type: string
              message:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              message:
                type: string
              success:
                type: boolean
            type: object
        "502":
          description: FastAPI service unavailable
          schema:
            properties:
              error:
                type: string
              message:
                type: string
              success:
                type: boolean
            type: object
      security: []
      summary: Execute code in playground mode (Gateway to FastAPI)
      tags:
      - playground
  /api/profile:
    get:
      description: Retrieve the profile information of the currently authenticated
        user
      produces:
      - application/json
      responses:
        "200":
          description: User profile data
          schema:
            $ref: '#/definitions/response.UserResponse'
        "401":
          description: Unauthorized - invalid or missing token
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: User not found in database
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get current user profile
      tags:
      - user
  /api/progress/{id}/logs:
    get:
      description: ดูประวัติการตรวจสอบความก้าวหน้า
      parameters:
      - description: Progress ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  logs:
                    items:
                      properties:
                        comment:
                          type: string
                        logId:
                          type: string
                        progressId:
                          type: string
                        status:
                          type: string
                        verifiedAt:
                          type: string
                        verifiedBy:
                          type: string
                      type: object
                    type: array
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "403":
          description: Forbidden
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Get verification logs
      tags:
      - progress
  /api/progress/{id}/verify:
    post:
      consumes:
      - application/json
      description: ตรวจสอบและอนุมัติ/ปฏิเสธความก้าวหน้า หาก approved จะเปลี่ยนสถานะ
        progress เป็น completed
      parameters:
      - description: Progress ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  comment:
                    type: string
                  logId:
                    type: string
                  progressId:
                    type: string
                  status:
                    type: string
                  verifiedAt:
                    type: string
                  verifiedBy:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "403":
          description: Forbidden
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Verify progress (Teachers/TAs only)
      tags:
      - progress
  /api/queue/execute:
    post:
      consumes:
      - application/json
      description: Submit code for execution in the queue
      parameters:
      - description: Code execution data
        in: body
        name: execution
        required: true
        schema:
          properties:
            code:
              type: string
            exercise_id:
              type: string
            file_name:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Code submitted for execution
          schema:
            properties:
              data:
                properties:
                  job_id:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Submit code for execution
      tags:
      - queue
  /api/queue/jobs:
    get:
      description: Get queue jobs with filtering and pagination (Teachers and TAs can see jobs by course, students see only their own)
      parameters:
      - description: Queue type filter
        enum:
        - code_execution
        - code_review
        in: query
        name: type
        type: string
      - description: Status filter
        enum:
        - pending
        - processing
        - completed
        - failed
        - cancelled
        in: query
        name: status
        type: string
      - description: Course ID filter (Teachers and TAs only)
        in: query
        name: course_id
        type: string
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Items per page (default: 20)'
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Queue jobs retrieved successfully
          schema:
            properties:
              data:
                properties:
                  jobs:
                    items:
                      type: object
                    type: array
                  pagination:
                    type: object
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - BearerAuth: []
      summary: Get queue jobs
      tags:
      - queue
  /api/queue/jobs/{id}:
    get:
      description: Get detailed information about a specific queue job
      parameters:
      - description: Job ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Queue job retrieved successfully
          schema:
            properties:
              data:
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Job not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - BearerAuth: []
      summary: Get queue job by ID
      tags:
      - queue
  /api/queue/jobs/{id}/cancel:
    post:
      description: Cancel a pending queue job (students can cancel their own, teachers
        can cancel any)
      parameters:
      - description: Job ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Job cancelled successfully
          schema:
            properties:
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Job not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      - BearerAuth: []
      summary: Cancel a queue job
      tags:
      - queue
  /api/queue/jobs/{id}/process:
    post:
      description: Manually process a queue job (Teachers and TAs only)
      parameters:
      - description: Job ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Job processed successfully
          schema:
            properties:
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Job not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Process a queue job (Teacher/TA only)
      tags:
      - queue
  /api/queue/review:
    post:
      consumes:
      - application/json
      description: Submit code for review in the queue
      parameters:
      - description: Code review data
        in: body
        name: review
        required: true
        schema:
          properties:
            course_id:
              type: string
            exercise_id:
              type: string
            review_notes:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Code submitted for review
          schema:
            properties:
              data:
                properties:
                  job_id:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Submit code for review
      tags:
      - queue
  /api/queue/stats:
    get:
      description: Get statistics about the queue (Teachers and Admins only)
      produces:
      - application/json
      responses:
        "200":
          description: Queue statistics retrieved successfully
          schema:
            properties:
              data:
                type: object
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get queue statistics
      tags:
      - queue
  /api/students/progress:
    get:
      description: ดูความก้าวหน้าของตนเอง โดยกรองตาม courseId ได้
      parameters:
      - description: Filter by Course ID
        in: query
        name: courseId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  progress:
                    items:
                      properties:
                        exerciseId:
                          type: string
                        exerciseTitle:
                          type: string
                        lastSubmittedAt:
                          type: string
                        progressId:
                          type: string
                        score:
                          type: integer
                        seatNumber:
                          type: string
                        status:
                          type: string
                        userId:
                          type: string
                      type: object
                    type: array
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Get own progress
      tags:
      - progress
  /api/submissions/{id}:
    get:
      description: ดูรายละเอียดการส่งงาน (เจ้าของ, Teachers, หรือ TAs ที่ enroll ในคอร์สเท่านั้น)
      parameters:
      - description: Submission ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  code:
                    type: string
                  errorMessage:
                    type: string
                  exerciseId:
                    type: string
                  failedCount:
                    type: integer
                  passedCount:
                    type: integer
                  results:
                    items:
                      properties:
                        actualOutput:
                          type: object
                        errorMessage:
                          type: string
                        resultId:
                          type: string
                        status:
                          type: string
                        testCaseId:
                          type: string
                      type: object
                    type: array
                  status:
                    type: string
                  submissionId:
                    type: string
                  submittedAt:
                    type: string
                  totalScore:
                    type: integer
                  userId:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "401":
          description: Unauthorized
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "403":
          description: Forbidden
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "404":
          description: Submission not found
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
        "500":
          description: Internal server error
          schema:
            properties:
              error:
                type: string
              success:
                type: boolean
            type: object
      security:
      - BearerAuth: []
      summary: Get submission detail
      tags:
      - submissions
  /api/submissions/{submission_id}:
    get:
      description: Get a specific PDF submission
      parameters:
      - description: Submission ID
        in: path
        name: submission_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/models.Submission'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get PDF submission
      tags:
      - pdf-exercises
  /api/submissions/{submission_id}/approve:
    post:
      consumes:
      - application/json
      description: Approve a PDF submission and assign score (Teachers/TAs only)
      parameters:
      - description: Submission ID
        in: path
        name: submission_id
        required: true
        type: string
      - description: Approval data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.ApprovePDFSubmissionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Approve PDF submission
      tags:
      - pdf-exercises
  /api/submissions/{submission_id}/reject:
    post:
      consumes:
      - application/json
      description: Reject a PDF submission (Teachers/TAs only)
      parameters:
      - description: Submission ID
        in: path
        name: submission_id
        required: true
        type: string
      - description: Rejection data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.RejectPDFSubmissionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.StandardResponse'
      security:
      - BearerAuth: []
      summary: Reject PDF submission
      tags:
      - pdf-exercises
  /api/test-cases/{id}:
    delete:
      description: Delete a test case
      parameters:
      - description: Test Case ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Test case deleted successfully
          schema:
            properties:
              data: {}
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Test case not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete test case
      tags:
      - test-cases
    put:
      consumes:
      - application/json
      description: Update test case information
      parameters:
      - description: Test Case ID
        in: path
        name: id
        required: true
        type: string
      - description: Test case update data
        in: body
        name: testcase
        required: true
        schema:
          properties:
            expected_output:
              type: object
            input_data:
              type: object
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated test case
          schema:
            properties:
              data:
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Test case not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Update test case
      tags:
      - test-cases
  /health:
    get:
      description: Check if the server is running and healthy
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  status:
                    type: string
                  timestamp:
                    type: string
                  version:
                    type: string
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
      summary: Health check endpoint
      tags:
      - system
  /test/token:
    get:
      description: Generate a test JWT token for API testing
      parameters:
      - default: false
        description: Is teacher user
        in: query
        name: is_teacher
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  expires_at:
                    type: string
                  token:
                    type: string
                  user:
                    properties:
                      email:
                        type: string
                      is_teacher:
                        type: boolean
                      name:
                        type: string
                      user_id:
                        type: string
                      user_type:
                        type: string
                    type: object
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
      summary: Generate test token for API testing
      tags:
      - testing
    post:
      consumes:
      - application/json
      description: Generate a test JWT token for API testing with custom parameters
        (in-memory only)
      parameters:
      - description: Token generation parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.TestTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              data:
                properties:
                  expires_at:
                    type: string
                  token:
                    type: string
                  user:
                    properties:
                      email:
                        type: string
                      firstname:
                        type: string
                      is_teacher:
                        type: boolean
                      lastname:
                        type: string
                      name:
                        type: string
                      user_id:
                        type: string
                      user_type:
                        type: string
                    type: object
                type: object
              message:
                type: string
              success:
                type: boolean
            type: object
        "400":
          description: Bad Request
          schema:
            properties:
              error:
                type: string
            type: object
        "403":
          description: Forbidden
          schema:
            properties:
              error:
                type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            properties:
              error:
                type: string
            type: object
      summary: Generate test token via POST for API testing
      tags:
      - testing
schemes:
- http
- https
securityDefinitions:
  ApiKeyAuth:
    description: API key authentication for secure endpoints.
    in: header
    name: dsview-api-key
    type: apiKey
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
