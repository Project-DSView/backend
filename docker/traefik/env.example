# Traefik Environment Configuration
# Copy this file to .env and modify as needed

# Basic Configuration
TRAEFIK_LOG_LEVEL=INFO
TRAEFIK_API_DASHBOARD=true
TRAEFIK_API_INSECURE=true

# Security Configuration
RATE_LIMIT_AVERAGE=100
RATE_LIMIT_BURST=200
RATE_LIMIT_PERIOD=1m

# IP Whitelist (comma-separated CIDR blocks)
# Leave empty to disable IP whitelisting
IP_WHITELIST=127.0.0.1/32,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,https://localhost:3000,https://127.0.0.1:3000
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOW_CREDENTIALS=true

# SSL Configuration (for production)
SSL_EMAIL=admin@dsview.com
SSL_DOMAIN=dsview.localhost

# Monitoring Configuration
PROMETHEUS_METRICS=true
ACCESS_LOG_FORMAT=json
ACCESS_LOG_FILE=/var/log/traefik/access.log

# Circuit Breaker Configuration
CIRCUIT_BREAKER_EXPRESSION=NetworkErrorRatio() > 0.3 || ResponseCodeRatio(500, 600, 0, 600) > 0.3
CIRCUIT_BREAKER_CHECK_PERIOD=10s
CIRCUIT_BREAKER_FALLBACK_DURATION=30s
CIRCUIT_BREAKER_RECOVERY_DURATION=10s

# Compression Configuration
COMPRESS_EXCLUDED_TYPES=text/event-stream,application/grpc

# Cache Configuration
CACHE_MAX_REQUEST_BODY=10485760
CACHE_MAX_RESPONSE_BODY=10485760
CACHE_MEM_REQUEST_BODY=2097152
CACHE_MEM_RESPONSE_BODY=2097152
